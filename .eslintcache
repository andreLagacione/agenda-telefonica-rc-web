[{"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\App.tsx":"1","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\index.tsx":"2","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\styles\\app.styles.ts":"3","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\styles\\global.ts":"4","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\sidebar\\sidebar.tsx":"5","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\sidebar\\sidebar.styles.ts":"6","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\pages\\contatos\\contatos.tsx":"7","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\title\\title.styles.ts":"8","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\reportWebVitals.ts":"9","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\title\\title.tsx":"10","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\table\\table.styles.ts":"11","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\utils\\firebase.utils.ts":"12","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\routes.tsx":"13","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\pages\\gerar-listas\\gerar-listas.tsx":"14","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\pages\\contatos\\create.tsx":"15","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\form\\form.styles.ts":"16","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\masks\\phone.ts":"17","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\validators\\phone.ts":"18","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\pages\\gerar-listas\\gerar-listas.styles.ts":"19","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\pages\\contatos\\contatos.styles.ts":"20"},{"size":637,"mtime":1613420939868,"results":"21","hashOfConfig":"22"},{"size":478,"mtime":1610821086000,"results":"23","hashOfConfig":"24"},{"size":573,"mtime":1612827636033,"results":"25","hashOfConfig":"22"},{"size":1760,"mtime":1610832418000,"results":"26","hashOfConfig":"24"},{"size":1501,"mtime":1613420734000,"results":"27","hashOfConfig":"24"},{"size":560,"mtime":1613408070000,"results":"28","hashOfConfig":"24"},{"size":8350,"mtime":1626228111731,"results":"29","hashOfConfig":"24"},{"size":176,"mtime":1610999508000,"results":"30","hashOfConfig":"24"},{"size":425,"mtime":1610819732000,"results":"31","hashOfConfig":"24"},{"size":270,"mtime":1613410482000,"results":"32","hashOfConfig":"24"},{"size":222,"mtime":1613407604000,"results":"33","hashOfConfig":"24"},{"size":1938,"mtime":1626227405269,"results":"34","hashOfConfig":"24"},{"size":683,"mtime":1613420956000,"results":"35","hashOfConfig":"24"},{"size":4437,"mtime":1626227387232,"results":"36","hashOfConfig":"24"},{"size":8048,"mtime":1626118829364,"results":"37","hashOfConfig":"24"},{"size":459,"mtime":1626135166330,"results":"38","hashOfConfig":"24"},{"size":329,"mtime":1614043352000,"results":"39","hashOfConfig":"24"},{"size":229,"mtime":1614044840000,"results":"40","hashOfConfig":"24"},{"size":246,"mtime":1615942048000,"results":"41","hashOfConfig":"24"},{"size":704,"mtime":1626135058191,"results":"42","hashOfConfig":"24"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},"1uacykv",{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1todedw",{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"77","usedDeprecatedRules":"58"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\App.tsx",[],["88","89"],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\index.tsx",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\styles\\app.styles.ts",[],["90","91"],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\styles\\global.ts",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\sidebar\\sidebar.tsx",[],["92","93"],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\sidebar\\sidebar.styles.ts",[],["94","95"],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\pages\\contatos\\contatos.tsx",["96","97"],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\title\\title.styles.ts",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\reportWebVitals.ts",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\title\\title.tsx",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\table\\table.styles.ts",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\utils\\firebase.utils.ts",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\routes.tsx",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\pages\\gerar-listas\\gerar-listas.tsx",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\pages\\contatos\\create.tsx",["98","99"],"import React, { useEffect, useState } from 'react';\r\nimport Form from '../../base/form/form.styles';\r\nimport { phoneMask } from '../../base/masks/phone';\r\nimport TitleComponent from '../../base/title/title';\r\nimport { phoneValidator } from '../../base/validators/phone';\r\nimport FirebaseService from '../../utils/firebase.utils';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { DocumentData } from '@firebase/firestore-types';\r\nimport { Contact } from '../../base/contact/contact.model';\r\nimport { FaSpinner } from 'react-icons/fa';\r\nimport { Spinner } from './contatos.styles';\r\n\r\nconst CreateContact: React.FC = () => {\r\n    const history = useHistory();\r\n    const [name, setName] = useState<string>('');\r\n    const [phone, setPhone] = useState<string>('');\r\n    const [validationMessage, setValidationMessage] = useState<string>('');\r\n    const [backupPhone, setBackupPhone] = useState<string>('');\r\n    const [isPhoneValid, setIsPhoneValid] = useState<boolean>(false);\r\n    const [isPhoneTouched, setIsPhoneTouched] = useState<boolean>(false);\r\n    const [isLoading, setIsLoading] = useState<boolean>(false);\r\n    const [isSaving, setIsSaving] = useState<boolean>(false);\r\n    let { id }: { id: string } = useParams();\r\n    let title = id ? 'Editar Contato' : 'Criar contato';\r\n\r\n    useEffect(() => {\r\n        getPhoneMask(phone);\r\n    }, [phone]);\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            getContatctById();\r\n        }\r\n    }, [id]);\r\n\r\n    const getPhoneMask = (value: string) => {\r\n        if (!value) {\r\n            return;\r\n        }\r\n        \r\n        const masked = phoneMask(value);\r\n        setPhone(masked);\r\n\r\n        if (backupPhone !== phone) {\r\n            validatePhone();\r\n        }\r\n    }\r\n\r\n    const validatePhone = () => {\r\n        const isValid = phoneValidator(phone);\r\n        const message = isValid ? '' : 'Telefone inválido.';\r\n        setIsPhoneValid(isValid);\r\n        setValidationMessage(message);\r\n\r\n        if (isValid) {\r\n            setIsLoading(true);\r\n            checkIfPhoneExists();\r\n        } else {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    const checkIfPhoneExists = () => {\r\n        if(phone.length) {\r\n            FirebaseService.findByField('contatos', 'phone', '==', phone)\r\n                .then(\r\n                    data => {\r\n                        if (!data.empty) {\r\n                            setIsPhoneValid(false);\r\n                            setValidationMessage('Este telefone já foi cadastrado.');\r\n                        }\r\n                    }\r\n                )\r\n                .finally(\r\n                    () => setIsLoading(false)\r\n                );\r\n        }\r\n    }\r\n\r\n    const submitForm = () => {\r\n        setIsSaving(true);\r\n\r\n        const contact: Contact = {\r\n            _id: id || '',\r\n            name: name || '-',\r\n            phone,\r\n        };\r\n\r\n        if (id) {\r\n            updateContact(contact);\r\n        } else {\r\n            createContact(contact);\r\n        }\r\n    }\r\n\r\n    const createContact = (contact: Contact) => {\r\n        const ref = FirebaseService.createDocReference('contatos');\r\n        contact._id = ref.id;\r\n\r\n        ref.set(contact).then(\r\n            _response => {\r\n                toast.success('Contato criado!');\r\n                clearStates();\r\n            },\r\n            _error => toast.error('Erro ao criar contato', _error),\r\n        )\r\n        .finally(\r\n            () => setIsSaving(false)\r\n        );\r\n    }\r\n\r\n    const updateContact = (contact: Contact) => {\r\n        FirebaseService.saveData('contatos', id, contact)\r\n            .then(\r\n                _response => {\r\n                    toast.success('Contato atualizado!');\r\n                    clearStates();\r\n\r\n                    setTimeout(() => {\r\n                        history.goBack();\r\n                    }, 1000);\r\n                },\r\n                _error => toast.error('Erro ao atualizar contato', _error),\r\n            )\r\n            .finally(\r\n                () => setIsSaving(false)\r\n            );\r\n    }\r\n\r\n    const clearStates = () => {\r\n        setName('');\r\n        setPhone('');\r\n        setValidationMessage('');\r\n        setIsPhoneValid(false);\r\n        setIsPhoneTouched(false);\r\n    }\r\n\r\n    const getContatctById = () => {\r\n        FirebaseService.findByField('contatos', '_id', '==', id)\r\n            .then(\r\n                (data: DocumentData) => {\r\n                    const doc = data.docs[0].data();\r\n                    setBackupPhone(doc.phone);\r\n                    setPhone(doc.phone);\r\n                    setName(doc.name);\r\n                    setValidationMessage('');\r\n                    setIsPhoneValid(true);\r\n                }\r\n            )\r\n            .finally(\r\n                () => setIsLoading(false)\r\n            );\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <TitleComponent title={title} />\r\n\r\n            <Form className=\"p-3 alert alert-dark mt-4\">\r\n                <form>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-6 relative\">\r\n                            <label className=\"form-label d-block mb-2\">Telefone *</label>\r\n                            <input\r\n                                type=\"tel\"\r\n                                name=\"telefone\"\r\n                                className={ isPhoneTouched && !isPhoneValid ? 'form-control border-danger' : 'form-control' }\r\n                                placeholder=\"(99) 9 9999-9999\"\r\n                                maxLength={16}\r\n                                value={phone}\r\n                                onChange={(e: any) => setPhone(e.target.value)}\r\n                                onFocus={() => setIsPhoneTouched(true)}\r\n                            />\r\n\r\n                            <small className=\"validate-message text-danger mt-1 d-block\">{ validationMessage }</small>\r\n                            <span\r\n                                className=\"icon\"\r\n                                hidden={ !isLoading }\r\n                            >\r\n                                <ClipLoader color=\"#222\" loading={true} size={18} />\r\n                            </span>\r\n                        </div>\r\n\r\n                        <div className=\"col-sm-6\">\r\n                            <label className=\"form-label d-block mb-2\">Nome</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                name=\"nome\"\r\n                                className=\"form-control\"\r\n                                value={name}\r\n                                onChange={e => setName(e.target.value)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"d-flex justify-content-end mt-3\">\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={() => history.goBack()}>Voltar</button>\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"btn btn-primary ml-3 btn-save\"\r\n                            onClick={() => submitForm()}\r\n                            disabled={!isPhoneValid || isSaving}\r\n                        >\r\n                            {\r\n                                isSaving\r\n                                ?\r\n                                <Spinner backgroundTransparent className=\"d-flex justify-content-center align-items-center\">\r\n                                    <FaSpinner size={20} className=\"loader\" color=\"#fff\" />\r\n                                </Spinner>\r\n                                :\r\n                                'Salvar'\r\n                            }\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </Form>\r\n\r\n            <ToastContainer />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default CreateContact;","D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\form\\form.styles.ts",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\masks\\phone.ts",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\base\\validators\\phone.ts",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\pages\\gerar-listas\\gerar-listas.styles.ts",[],"D:\\Jobs\\estudando\\agenda-telefonica-rc-web\\src\\pages\\contatos\\contatos.styles.ts",[],{"ruleId":"100","replacedBy":"101"},{"ruleId":"102","replacedBy":"103"},{"ruleId":"100","replacedBy":"104"},{"ruleId":"102","replacedBy":"105"},{"ruleId":"100","replacedBy":"106"},{"ruleId":"102","replacedBy":"107"},{"ruleId":"100","replacedBy":"108"},{"ruleId":"102","replacedBy":"109"},{"ruleId":"110","severity":1,"message":"111","line":24,"column":8,"nodeType":"112","endLine":24,"endColumn":10,"suggestions":"113"},{"ruleId":"110","severity":1,"message":"114","line":85,"column":26,"nodeType":"115","endLine":88,"endColumn":16},{"ruleId":"110","severity":1,"message":"116","line":30,"column":8,"nodeType":"112","endLine":30,"endColumn":15,"suggestions":"117"},{"ruleId":"110","severity":1,"message":"118","line":36,"column":8,"nodeType":"112","endLine":36,"endColumn":12,"suggestions":"119"},"no-native-reassign",["120"],"no-negated-in-lhs",["121"],["120"],["121"],["120"],["121"],["120"],["121"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'loadContacts'. Either include it or remove the dependency array.","ArrayExpression",["122"],"Assignments to the 'timeoutControl' variable from inside React Hook useCallback will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useCallback.","CallExpression","React Hook useEffect has a missing dependency: 'getPhoneMask'. Either include it or remove the dependency array.",["123"],"React Hook useEffect has a missing dependency: 'getContatctById'. Either include it or remove the dependency array.",["124"],"no-global-assign","no-unsafe-negation",{"desc":"125","fix":"126"},{"desc":"127","fix":"128"},{"desc":"129","fix":"130"},"Update the dependencies array to be: [loadContacts]",{"range":"131","text":"132"},"Update the dependencies array to be: [getPhoneMask, phone]",{"range":"133","text":"134"},"Update the dependencies array to be: [getContatctById, id]",{"range":"135","text":"136"},[1124,1126],"[loadContacts]",[1476,1483],"[getPhoneMask, phone]",[1581,1585],"[getContatctById, id]"]